# Инструменты и как я разрабатываю скрипты.

Сегодня хотелось бы поговорить о том, как я веду разработку, что использую, как установить и сравним Sublime Text 3 и Visual Studio Code.

Ни в коем случае никого ни к чему не принуждаю, просто описываю своё.

## Список будущих статей

- [x] Статья 1: [Инструменты и как я разрабатываю скрипты, VSCode (и дополнения к нему), Sublime](https://qlik.pw/teorija-razrabotki-qlik-instrumenty-i-kak-2_515/)
- [x] Статья 2: [Разбираем структуру каталогов, волшебные Include](https://qlik.pw/teorija-razrabotki-qlik-razbiraem-struktu_529/)
- [x] Статья 3: [Извлекаем скрипты из QVW и выбираем GIT](https://qlik.pw/teorija-razrabotki-qlik-izvlekaem-skript_535/)
- [ ] Статья 4: Пользовательская документация, автоматическое обновление её на сервере и копаем accesspoint (QV)
- [ ] Статья 5: Пользуемся GIT внутри VSCode и как это отражается на продакшн-сервере QlikView
- [ ] Статья 6: Используем функции из QVC (QlikView-Components), ускорение загрузки данных если есть Where ... 

Если есть предложения по обзорам на ваши темы - пишете комментарии или в Telegram - [@Chernov](https://t.me/Chernov)

## Про Sublime Text vs Visual Studio Code

Не стану упоминать что Sublime является по-умолчанию платным и приходилось искать способы его использования в "бесплатном режиме", с VSCode всё по-другому, он изначально бесплатный.

Оба продукта имеют поддержку синтаксиса Qlik скриптов, что очень удобно, за что я, собственно, их и использую. А почему? Да всё просто - помните, как долго иногда приходится ждать, когда вы нажимаете на CTRL+E (в QV) или открываете страницу редактирования скриптов (в QS), так вот, использование альтернативных редакторов позволяет в разы сократить скорость набора текста, ускорить навигацию и т.д.

После установки одного или другого ПО, для полноценного его использования нужно установить дополнения. 

Вторая причина, по которой я отказался от Sublime - нет возможности работать с git, а может и есть, но я не разобрался :(

В Sublime это делается так : CTRL+SHIFT+P > ip (подсветится строка - Install - Package Control), ENTER, затем, после его установки опять заходим - CTRL+SHIFT+P -> ip -> Enter, в появившемся окне пишем - inQlik -> Enter, после некоторых загрузок с гита пакет устанавливается, и мы можем писать скрипты прямо в редакторе. Для того чтобы подсветка синтаксиса работала по-умолчанию, файлы со скриптингом должны иметь расширение .qvs. Сам пакет лежит тут [https://github.com/kmpm/sublime-qvs](https://github.com/kmpm/sublime-qvs)

В VSCode немного по-другому, но также просто, после запуска нажимаем CTRL+SHIFT+X и пишем Qlik. 

Кроме дополнения Qlik, я использую:
* Excel Viewer - для удобного просмотра данных в файлах csv
* GitLens - для GIT, который я использую как репозиторий скриптов, картинок, документации
* Markdown All in One - для написания документации
* Markdown PDF - для конвертации .md-файлов в 2 клика в : html, pdf
* Markdown Preview Enhanced - для предпросмотра документации в VSCode
* TODO Highlight - для заметок в скриптах
* _TODO Tree_ - перестал использовать, т.к. не донастроил исключения, и он сильно грузил проц :(
* XML Tools - для удобства просмотра xml-файлов
* Code Spell Checker + Russian Code Spell Checker - для проверки орфографии, автоматически подсвечивает проблемы, есть свой словарь для исключений
* Markdown Todo - позволяет проставлять отметки выполнения по задачам хоткеем ALT+D
    - [ ] Задача1
    - [x] Задача2

## Как начать работать?
Устанавливаем [Visual Studio Code](https://code.visualstudio.com/)

Ставим дополнение : Qlik

![1](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/2019-01-30_09-44-22.png)

Далее нажимаем install (у меня disable, потому что уже установлен пакет)

![2](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/2019-01-30_09-45-03.png)

Теперь при открытии любого файла с расширением *qvs*, мы будем иметь авто-подсветку синтаксиса Qlik.

Я с точностью не могу сказать кто придумал называть файлы со скриптами для Qlik именно таким расширением - *qvs* , но это всё тянется как минимум с 2011 года

Для того, чтобы у нас Qlik умел правильно читать файлы из qvs, они должны быть сохранены в кодировке UTF-8, а для того, чтобы они корректно выгружались в git (любой) и был доступен просмотр русских букв необходимо использовать кодировку : UTF-8 with BOM. На скрине видно в правом нижнем углу

А также, сразу отметил то, что дополняет GitLens внутри, пишет: кто, когда изменил и какое было описание у коммита

![9](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/2019-01-30_10-29-28.png)

## Почему не встроенные редакторы?

Потому что в сторонних есть дополнительные возможности работы с текстом.

* Выбираем любой текст (мышкой или на клавиатуре) и он автоматом подсвечивается везде, где встречается
  
  ![10](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/2019-01-30_11-08-03.png)
* Если нужно сделать быструю замену текста, то делаем так : выбираем нужный текст (например, это может быть название переменной), нажимаем CTRL+F (поиск), далее ALT+ENTER, и у нас становится выбранным изначальный текст по всему скрипту. Дальше есть, таким образом мы выставляем "курсоры" на все места, где у нас был этот текст, далее гифка (не правильно написал про курсоры, конечно, CTRL+D а не ALT+D) :
  
  ![11](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/2019-01-30_11-15-48.gif)
* Поиск и замена значений во всех скриптах сразу, CTRL+SHIFT+F
  
  ![12](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/Code_2019-01-30_11-21-36.png)
* С помощью GitLens удобно сравнивать содержимое различный версий в виде дерева
* Есть вся история всех изменений скриптов, легко можно откатится на любую версию
* Можно и нужно вести несколько веток для разработки и продакшена (/dev /master /еще что-то)



## Дополнительно используемое ПО при разработке

Примерно 3 года я писал код в [Sublime Text 3](https://www.sublimetext.com/), но с января 2019 года перешел на [Visual Studio Code](https://code.visualstudio.com/).

Сразу дополню, что кроме VSCode и его дополнений я использую :

* [DBeaver](https://dbeaver.io/) - ПО с открытым исходным кодом, которое позволяет подключаться к множеству типов БД с одного места, в частности, лично я использую его для подключения к MSSQL, MySQL и Oracle. Только и успевай БД из списка выбирать ))

![6](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/dbeaver_2019-01-30_10-05-48.png)

* QViewer (https://easyqlik.com/) - Помогает смотреть содержимое QVD-файлов, триал-версия имеет лимит на 100 000 строк, но этого достаточно. Есть поиск и описание данных. В общем MustHave! Изначально написан Олегом Троянским, но в дальнейшем передан Rob Wunderlich. Олег сейчас занимается разработкой [EasyMorph](https://easymorph.com/) (тоже хотелось бы его использовать для ETL, но ИМХО - дороговато, $63 в месяц).

![5](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/QViewer_2019-01-30_10-08-08.png)

* ShareX (https://getsharex.com/) - open-source решения для создания скриншотов, миллион функционала )). Интересно, что пока я сейчас смотрел доп. функционал, чтобы сделать картинки, который я не использовал ранее, наткнулся на то, что он может делать аплоад картинок на gist.github.com . Если вам пока не понятно, то в других статьях я подробнее опишу про этот сервис. А пока картиночки:

![7](https://getsharex.com/img/ShareX_Animation.gif) ![4](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/ShareX_2019-01-30_10-10-13.png) ![3](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/ShareX_2019-01-30_10-13-32.png) ![8](https://gitlab.com/bintocher/qlik.pw-site/raw/5a673b6bdd58314d18bfdf6d3b37c5765e2a9fd5/Инструкции/images/ShareX_2019-01-30_10-21-31.png)


## Заключение

Всем Qlik.